{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.223.0"},"children":{"WeatherAlertDataStack":{"id":"WeatherAlertDataStack","path":"WeatherAlertDataStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"MumBaseTable":{"id":"MumBaseTable","path":"WeatherAlertDataStack/MumBaseTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBase","version":"2.223.0","metadata":[]}},"WeatherAlertDataBucket":{"id":"WeatherAlertDataBucket","path":"WeatherAlertDataStack/WeatherAlertDataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherAlertDataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"weather-alert-data-423277768248","lifecycleConfiguration":{"rules":[{"id":"ArchiveOldData","status":"Enabled","transitions":[{"storageClass":"INTELLIGENT_TIERING","transitionInDays":90}]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/WeatherAlertDataBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherAlertDataBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WeatherAlertDataBucketD16F4096"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WeatherAlertDataBucketD16F4096","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WeatherAlertDataBucketD16F4096","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"LocationFetchDLQ":{"id":"LocationFetchDLQ","path":"WeatherAlertDataStack/LocationFetchDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/LocationFetchDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"LocationFetchDLQ","sqsManagedSseEnabled":true}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/LocationFetchDLQ/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/LocationFetchDLQ/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["LocationFetchDLQD8E8F4D7","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"LocationFetchDLQD8E8F4D7"}]}}}}}}},"LocationFetchQueue":{"id":"LocationFetchQueue","path":"WeatherAlertDataStack/LocationFetchQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/LocationFetchQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":345600,"queueName":"LocationFetch","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["LocationFetchDLQD8E8F4D7","Arn"]},"maxReceiveCount":3},"sqsManagedSseEnabled":true,"visibilityTimeout":300}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/LocationFetchQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/LocationFetchQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["LocationFetchQueue91236619","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"LocationFetchQueue91236619"}]}}}}}}},"WeatherResultDLQ":{"id":"WeatherResultDLQ","path":"WeatherAlertDataStack/WeatherResultDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherResultDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"WeatherResultDLQ","sqsManagedSseEnabled":true}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/WeatherResultDLQ/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherResultDLQ/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["WeatherResultDLQ303B9C4D","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"WeatherResultDLQ303B9C4D"}]}}}}}}},"WeatherResultQueue":{"id":"WeatherResultQueue","path":"WeatherAlertDataStack/WeatherResultQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherResultQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":345600,"queueName":"WeatherResult","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["WeatherResultDLQ303B9C4D","Arn"]},"maxReceiveCount":3},"sqsManagedSseEnabled":true,"visibilityTimeout":300}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/WeatherResultQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/WeatherResultQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["WeatherResultQueueE0248ACE","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"WeatherResultQueueE0248ACE"}]}}}}}}},"AdviceRequestDLQ":{"id":"AdviceRequestDLQ","path":"WeatherAlertDataStack/AdviceRequestDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/AdviceRequestDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"AdviceRequestDLQ","sqsManagedSseEnabled":true}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/AdviceRequestDLQ/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/AdviceRequestDLQ/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["AdviceRequestDLQ1EC9AC4D","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"AdviceRequestDLQ1EC9AC4D"}]}}}}}}},"AdviceRequestQueue":{"id":"AdviceRequestQueue","path":"WeatherAlertDataStack/AdviceRequestQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/AdviceRequestQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":345600,"queueName":"AdviceRequest","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["AdviceRequestDLQ1EC9AC4D","Arn"]},"maxReceiveCount":3},"sqsManagedSseEnabled":true,"visibilityTimeout":300}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/AdviceRequestQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/AdviceRequestQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["AdviceRequestQueue8CBFDE05","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"AdviceRequestQueue8CBFDE05"}]}}}}}}},"NotifyDLQ":{"id":"NotifyDLQ","path":"WeatherAlertDataStack/NotifyDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/NotifyDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"NotifyDLQ","sqsManagedSseEnabled":true}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/NotifyDLQ/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/NotifyDLQ/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["NotifyDLQBCF14522","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"NotifyDLQBCF14522"}]}}}}}}},"NotifyQueue":{"id":"NotifyQueue","path":"WeatherAlertDataStack/NotifyQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/NotifyQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":604800,"queueName":"NotifyQueue","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NotifyDLQBCF14522","Arn"]},"maxReceiveCount":3},"sqsManagedSseEnabled":true,"visibilityTimeout":300}}},"Policy":{"id":"Policy","path":"WeatherAlertDataStack/NotifyQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertDataStack/NotifyQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::GetAtt":["NotifyQueueB34E1758","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"NotifyQueueB34E1758"}]}}}}}}},"MumTableName":{"id":"MumTableName","path":"WeatherAlertDataStack/MumTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DataBucketName":{"id":"DataBucketName","path":"WeatherAlertDataStack/DataBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LocationFetchQueueUrl":{"id":"LocationFetchQueueUrl","path":"WeatherAlertDataStack/LocationFetchQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NotifyQueueUrl":{"id":"NotifyQueueUrl","path":"WeatherAlertDataStack/NotifyQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WeatherAlertDataStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WeatherAlertDataStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WeatherAlertDataStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"Arn\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"LocationFetchQueue91236619\"}":{"id":"Output{\"Ref\":\"LocationFetchQueue91236619\"}","path":"WeatherAlertDataStack/Exports/Output{\"Ref\":\"LocationFetchQueue91236619\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"Arn\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"WeatherResultQueueE0248ACE\"}":{"id":"Output{\"Ref\":\"WeatherResultQueueE0248ACE\"}","path":"WeatherAlertDataStack/Exports/Output{\"Ref\":\"WeatherResultQueueE0248ACE\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"Arn\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"NotifyQueueB34E1758\"}":{"id":"Output{\"Ref\":\"NotifyQueueB34E1758\"}","path":"WeatherAlertDataStack/Exports/Output{\"Ref\":\"NotifyQueueB34E1758\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"QueueName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"QueueName\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"LocationFetchQueue91236619\",\"QueueName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"QueueName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"QueueName\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"WeatherResultQueueE0248ACE\",\"QueueName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"QueueName\"]}":{"id":"Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"QueueName\"]}","path":"WeatherAlertDataStack/Exports/Output{\"Fn::GetAtt\":[\"NotifyQueueB34E1758\",\"QueueName\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WeatherAlertDataStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WeatherAlertDataStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"WeatherAlertComputeStack":{"id":"WeatherAlertComputeStack","path":"WeatherAlertComputeStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"TomorrowIoSecret":{"id":"TomorrowIoSecret","path":"WeatherAlertComputeStack/TomorrowIoSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"RecipientsToLocationsFn":{"id":"RecipientsToLocationsFn","path":"WeatherAlertComputeStack/RecipientsToLocationsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":["arn:aws:dynamodb:us-east-1:423277768248:table/MumBaseTable",{"Ref":"AWS::NoValue"}]},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619ArnF5D7573C"}}],"Version":"2012-10-17"},"policyName":"RecipientsToLocationsFnServiceRoleDefaultPolicy156B78C1","roles":[{"Ref":"RecipientsToLocationsFnServiceRole590C0D93"}]}}}}}}},"Code":{"id":"Code","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-423277768248-us-east-1","s3Key":"a9ec1d8c6f6304c24cb3adadcac3f75b271be0f110b5d0f2f2f5e9b7cd32ee7d.zip"},"description":"Scans DynamoDB for recipient profiles and queues unique locations","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"weather-alert-system","LOG_LEVEL":"INFO","RECIPIENTS_TABLE_NAME":"MumBaseTable","MUM_TABLE_NAME":"MumBaseTable","LOCATION_QUEUE_URL":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputRefLocationFetchQueue91236619E574A292"}}},"functionName":"WeatherAlert-RecipientsToLocations","handler":"index.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["RecipientsToLocationsFnServiceRole590C0D93","Arn"]},"runtime":"python3.14","timeout":300,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LogGroup":{"id":"LogGroup","path":"WeatherAlertComputeStack/RecipientsToLocationsFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"DailyWeatherCheckRule":{"id":"DailyWeatherCheckRule","path":"WeatherAlertComputeStack/DailyWeatherCheckRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/DailyWeatherCheckRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Triggers weather alert workflow daily","name":"WeatherAlert-DailyWeatherCheck","scheduleExpression":"cron(0 6 ? * * *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["RecipientsToLocationsFn3C2C0425","Arn"]}}]}}},"AllowEventRuleWeatherAlertComputeStackRecipientsToLocationsFn04B8D3EE":{"id":"AllowEventRuleWeatherAlertComputeStackRecipientsToLocationsFn04B8D3EE","path":"WeatherAlertComputeStack/DailyWeatherCheckRule/AllowEventRuleWeatherAlertComputeStackRecipientsToLocationsFn04B8D3EE","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RecipientsToLocationsFn3C2C0425","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["DailyWeatherCheckRule48D6738A","Arn"]}}}}}},"WeatherFetchFn":{"id":"WeatherFetchFn","path":"WeatherAlertComputeStack/WeatherFetchFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertComputeStack/WeatherFetchFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertComputeStack/WeatherFetchFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/WeatherFetchFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertComputeStack/WeatherFetchFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/WeatherFetchFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEArn15DCF5A1"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:423277768248:secret:weather-alert/api-key-??????"},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619ArnF5D7573C"}}],"Version":"2012-10-17"},"policyName":"WeatherFetchFnServiceRoleDefaultPolicyA3D580CD","roles":[{"Ref":"WeatherFetchFnServiceRole37233A93"}]}}}}}}},"Code":{"id":"Code","path":"WeatherAlertComputeStack/WeatherFetchFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertComputeStack/WeatherFetchFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertComputeStack/WeatherFetchFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/WeatherFetchFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-423277768248-us-east-1","s3Key":"6ec75d72e9199829f40d6df4f4ed55f1acdb43b91d30fed2e015e1e4e52a3010.zip"},"description":"Fetches weather forecasts from Tomorrow.io API","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"weather-alert-system","LOG_LEVEL":"INFO","WEATHER_RESULT_QUEUE_URL":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputRefWeatherResultQueueE0248ACE7A86D590"},"TEMP_THRESHOLD_C":"32","TOMORROW_IO_API_KEY":"{{resolve:secretsmanager:arn:aws:secretsmanager:us-east-1:423277768248:secret:weather-alert/api-key:SecretString:::}}"}},"functionName":"WeatherAlert-WeatherFetch","handler":"index.lambda_handler","memorySize":512,"reservedConcurrentExecutions":1,"role":{"Fn::GetAtt":["WeatherFetchFnServiceRole37233A93","Arn"]},"runtime":"python3.14","timeout":300,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"WeatherAlertComputeStack/WeatherFetchFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/WeatherFetchFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LogGroup":{"id":"LogGroup","path":"WeatherAlertComputeStack/WeatherFetchFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"SqsEventSource:WeatherAlertDataStackLocationFetchQueueEE267A7F":{"id":"SqsEventSource:WeatherAlertDataStackLocationFetchQueueEE267A7F","path":"WeatherAlertComputeStack/WeatherFetchFn/SqsEventSource:WeatherAlertDataStackLocationFetchQueueEE267A7F","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/WeatherFetchFn/SqsEventSource:WeatherAlertDataStackLocationFetchQueueEE267A7F/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"eventSourceArn":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619ArnF5D7573C"},"functionName":{"Ref":"WeatherFetchFnAA97F15F"},"functionResponseTypes":["ReportBatchItemFailures"],"maximumBatchingWindowInSeconds":5}}}}}}},"MessageGeneratorFn":{"id":"MessageGeneratorFn","path":"WeatherAlertComputeStack/MessageGeneratorFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertComputeStack/MessageGeneratorFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertComputeStack/MessageGeneratorFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/MessageGeneratorFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertComputeStack/MessageGeneratorFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/MessageGeneratorFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-3-sonnet-20240229-v1:0"},{"Action":"bedrock:Retrieve","Effect":"Allow","Resource":"arn:aws:bedrock:us-east-1:423277768248:knowledge-base/*"},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758Arn0733E2D4"}},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEArn15DCF5A1"}}],"Version":"2012-10-17"},"policyName":"MessageGeneratorFnServiceRoleDefaultPolicyFE4974EA","roles":[{"Ref":"MessageGeneratorFnServiceRole0503ACEF"}]}}}}}}},"Code":{"id":"Code","path":"WeatherAlertComputeStack/MessageGeneratorFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertComputeStack/MessageGeneratorFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertComputeStack/MessageGeneratorFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/MessageGeneratorFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-423277768248-us-east-1","s3Key":"3b9a4816f57e16aa5f0a0bd044865b9282b6d5f918d86eb85bdd7a1cd3ce6f78.zip"},"description":"Generates personalized messages using Bedrock KB and Claude","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"weather-alert-system","LOG_LEVEL":"INFO","NOTIFY_QUEUE_URL":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputRefNotifyQueueB34E17580319ED30"},"BEDROCK_KNOWLEDGE_BASE_ID":{"Fn::ImportValue":"WeatherAlertBedrockKBId"},"BEDROCK_MODEL_ID":"anthropic.claude-3-sonnet-20240229-v1:0","BEDROCK_SYSTEM_PROMPT":"You are a maternal health advisor providing supportive, actionable health advice to pregnant and postpartum mothers based on weather forecasts."}},"functionName":"WeatherAlert-MessageGenerator","handler":"index.lambda_handler","memorySize":1024,"reservedConcurrentExecutions":2,"role":{"Fn::GetAtt":["MessageGeneratorFnServiceRole0503ACEF","Arn"]},"runtime":"python3.14","timeout":300,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"WeatherAlertComputeStack/MessageGeneratorFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/MessageGeneratorFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LogGroup":{"id":"LogGroup","path":"WeatherAlertComputeStack/MessageGeneratorFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"SqsEventSource:WeatherAlertDataStackWeatherResultQueueAC3128A2":{"id":"SqsEventSource:WeatherAlertDataStackWeatherResultQueueAC3128A2","path":"WeatherAlertComputeStack/MessageGeneratorFn/SqsEventSource:WeatherAlertDataStackWeatherResultQueueAC3128A2","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/MessageGeneratorFn/SqsEventSource:WeatherAlertDataStackWeatherResultQueueAC3128A2/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":5,"eventSourceArn":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEArn15DCF5A1"},"functionName":{"Ref":"MessageGeneratorFn38C9DEB2"},"functionResponseTypes":["ReportBatchItemFailures"],"maximumBatchingWindowInSeconds":10}}}}}}},"SendAdviceSMSFn":{"id":"SendAdviceSMSFn","path":"WeatherAlertComputeStack/SendAdviceSMSFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertComputeStack/SendAdviceSMSFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertComputeStack/SendAdviceSMSFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/SendAdviceSMSFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertComputeStack/SendAdviceSMSFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/SendAdviceSMSFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"SendAdviceSMSFnServiceRoleDefaultPolicyB27CE078","roles":[{"Ref":"SendAdviceSMSFnServiceRoleA999FFCC"}]}}}}}}},"Code":{"id":"Code","path":"WeatherAlertComputeStack/SendAdviceSMSFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertComputeStack/SendAdviceSMSFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertComputeStack/SendAdviceSMSFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/SendAdviceSMSFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-423277768248-us-east-1","s3Key":"bde8e9f2d8dd7006224be8cf3d7d7618dc1b66238ea28c82537d1f3b2ff1ace8.zip"},"description":"Sends SMS notifications via Africas Talking","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"weather-alert-system","LOG_LEVEL":"INFO","AT_API_KEY":"NOT_CONFIGURED","AT_USERNAME":"NOT_CONFIGURED","AT_SENDER_ID":"WeatherAlert"}},"functionName":"WeatherAlert-SendSMS","handler":"index.lambda_handler","memorySize":512,"role":{"Fn::GetAtt":["SendAdviceSMSFnServiceRoleA999FFCC","Arn"]},"runtime":"python3.14","timeout":300,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"WeatherAlertComputeStack/SendAdviceSMSFn/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"WeatherAlertComputeStack/SendAdviceSMSFn/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LogGroup":{"id":"LogGroup","path":"WeatherAlertComputeStack/SendAdviceSMSFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ProfilesToLocationsFnArn":{"id":"ProfilesToLocationsFnArn","path":"WeatherAlertComputeStack/ProfilesToLocationsFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WeatherFetchFnArn":{"id":"WeatherFetchFnArn","path":"WeatherAlertComputeStack/WeatherFetchFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AdviceFnArn":{"id":"AdviceFnArn","path":"WeatherAlertComputeStack/AdviceFnArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WeatherAlertComputeStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WeatherAlertComputeStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"WeatherAlertComputeStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Output{\"Ref\":\"RecipientsToLocationsFn3C2C0425\"}":{"id":"Output{\"Ref\":\"RecipientsToLocationsFn3C2C0425\"}","path":"WeatherAlertComputeStack/Exports/Output{\"Ref\":\"RecipientsToLocationsFn3C2C0425\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"WeatherFetchFnAA97F15F\"}":{"id":"Output{\"Ref\":\"WeatherFetchFnAA97F15F\"}","path":"WeatherAlertComputeStack/Exports/Output{\"Ref\":\"WeatherFetchFnAA97F15F\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"MessageGeneratorFn38C9DEB2\"}":{"id":"Output{\"Ref\":\"MessageGeneratorFn38C9DEB2\"}","path":"WeatherAlertComputeStack/Exports/Output{\"Ref\":\"MessageGeneratorFn38C9DEB2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"SendAdviceSMSFn1E4B7F74\"}":{"id":"Output{\"Ref\":\"SendAdviceSMSFn1E4B7F74\"}","path":"WeatherAlertComputeStack/Exports/Output{\"Ref\":\"SendAdviceSMSFn1E4B7F74\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WeatherAlertComputeStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WeatherAlertComputeStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"WeatherAlertWebHostingStack":{"id":"WeatherAlertWebHostingStack","path":"WeatherAlertWebHostingStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"WeatherAlertUserPool":{"id":"WeatherAlertUserPool","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.223.0","metadata":[]},"children":{"smsRole":{"id":"smsRole","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"WeatherAlertWebHostingStackWeatherAlertUserPoolCED072E4"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"aliasAttributes":["email"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","enabledMfas":["SMS_MFA","SOFTWARE_TOKEN_MFA"],"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"smsConfiguration":{"externalId":"WeatherAlertWebHostingStackWeatherAlertUserPoolCED072E4","snsCallerArn":{"Fn::GetAtt":["WeatherAlertUserPoolsmsRole96B9686E","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolName":"WeatherAlertUsers","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"WeatherAlertWebClient":{"id":"WeatherAlertWebClient","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/WeatherAlertWebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertUserPool/WeatherAlertWebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["https://example.com"],"clientName":"WeatherAlertWebApp","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"preventUserExistenceErrors":"ENABLED","supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"WeatherAlertUserPoolA3C999DE"}}}}}}}},"WeatherAlertIdentityPool":{"id":"WeatherAlertIdentityPool","path":"WeatherAlertWebHostingStack/WeatherAlertIdentityPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"cognitoIdentityProviders":[{"clientId":{"Ref":"WeatherAlertUserPoolWeatherAlertWebClient430D9C57"},"providerName":{"Fn::GetAtt":["WeatherAlertUserPoolA3C999DE","ProviderName"]}}],"identityPoolName":"WeatherAlertIdentity"}}},"CognitoAuthenticatedRole":{"id":"CognitoAuthenticatedRole","path":"WeatherAlertWebHostingStack/CognitoAuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportCognitoAuthenticatedRole":{"id":"ImportCognitoAuthenticatedRole","path":"WeatherAlertWebHostingStack/CognitoAuthenticatedRole/ImportCognitoAuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/CognitoAuthenticatedRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":{"Ref":"WeatherAlertIdentityPool"}},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"authenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"}}}}}},"IdentityPoolRoleAttachment":{"id":"IdentityPoolRoleAttachment","path":"WeatherAlertWebHostingStack/IdentityPoolRoleAttachment","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPoolRoleAttachment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPoolRoleAttachment","aws:cdk:cloudformation:props":{"identityPoolId":{"Ref":"WeatherAlertIdentityPool"},"roles":{"authenticated":{"Fn::GetAtt":["CognitoAuthenticatedRole5CA1BC89","Arn"]}}}}},"SQSPollerFunction":{"id":"SQSPollerFunction","path":"WeatherAlertWebHostingStack/SQSPollerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"WeatherAlertWebHostingStack/SQSPollerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"WeatherAlertWebHostingStack/SQSPollerFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/SQSPollerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"WeatherAlertWebHostingStack/SQSPollerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/SQSPollerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758Arn0733E2D4"}}],"Version":"2012-10-17"},"policyName":"SQSPollerFunctionServiceRoleDefaultPolicy689E8DA3","roles":[{"Ref":"SQSPollerFunctionServiceRoleF6A9AC71"}]}}}}}}},"Code":{"id":"Code","path":"WeatherAlertWebHostingStack/SQSPollerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"WeatherAlertWebHostingStack/SQSPollerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"WeatherAlertWebHostingStack/SQSPollerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/SQSPollerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-423277768248-us-east-1","s3Key":"a5ff26be30be9ac41f979b6331a34921fbcd1a8e17ea729d936169be47e14298.zip"},"environment":{"variables":{"NOTIFY_QUEUE_URL":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputRefNotifyQueueB34E17580319ED30"}}},"functionName":"WeatherAlert-SQSPoller","handler":"index.lambda_handler","role":{"Fn::GetAtt":["SQSPollerFunctionServiceRoleF6A9AC71","Arn"]},"runtime":"python3.14","timeout":30}}}}},"WeatherAlertAPI":{"id":"WeatherAlertAPI","path":"WeatherAlertWebHostingStack/WeatherAlertAPI","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"Secure API for fetching weather alerts","name":"Weather Alert API"}}},"Deployment":{"id":"Deployment","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Secure API for fetching weather alerts","restApiId":{"Ref":"WeatherAlertAPI4572357A"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"WeatherAlertAPIDeploymentAC479194e21e0ea6117f5ad467df58c10c8c45b6"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"metricsEnabled":true,"throttlingBurstLimit":200,"throttlingRateLimit":100}],"restApiId":{"Ref":"WeatherAlertAPI4572357A"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Default":{"id":"Default","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.223.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["WeatherAlertAPI4572357A","RootResourceId"]},"restApiId":{"Ref":"WeatherAlertAPI4572357A"}}}}}},"messages":{"id":"messages","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["WeatherAlertAPI4572357A","RootResourceId"]},"pathPart":"messages","restApiId":{"Ref":"WeatherAlertAPI4572357A"}}}},"OPTIONS":{"id":"OPTIONS","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"WeatherAlertAPImessagesF3BBAD85"},"restApiId":{"Ref":"WeatherAlertAPI4572357A"}}}}}},"GET":{"id":"GET","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.223.0","metadata":[]},"children":{"ApiPermission.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages":{"id":"ApiPermission.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/GET/ApiPermission.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SQSPollerFunction8E43D4EE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:423277768248:",{"Ref":"WeatherAlertAPI4572357A"},"/",{"Ref":"WeatherAlertAPIDeploymentStageprodB437BECD"},"/GET/messages"]]}}}},"ApiPermission.Test.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages":{"id":"ApiPermission.Test.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/GET/ApiPermission.Test.WeatherAlertWebHostingStackWeatherAlertAPI275B3A89.GET..messages","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SQSPollerFunction8E43D4EE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:423277768248:",{"Ref":"WeatherAlertAPI4572357A"},"/test-invoke-stage/GET/messages"]]}}}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertAPI/Default/messages/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"CognitoAuthorizerF3215DBC"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SQSPollerFunction8E43D4EE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"WeatherAlertAPImessagesF3BBAD85"},"restApiId":{"Ref":"WeatherAlertAPI4572357A"}}}}}}}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"WeatherAlertWebHostingStack/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"WeatherAlertCognitoAuthorizer","providerArns":[{"Fn::GetAtt":["WeatherAlertUserPoolA3C999DE","Arn"]}],"restApiId":{"Ref":"WeatherAlertAPI4572357A"},"type":"COGNITO_USER_POOLS"}}}}},"WeatherAlertWebBucket":{"id":"WeatherAlertWebBucket","path":"WeatherAlertWebHostingStack/WeatherAlertWebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertWebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"weather-alert-web-ui-423277768248","loggingConfiguration":{"logFilePrefix":"access-logs/"},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"WeatherAlertWebHostingStack/WeatherAlertWebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertWebBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WeatherAlertWebBucketD9CCCAAD"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","Arn"]},"/*"]]}]},{"Action":"s3:PutObject","Condition":{"ArnLike":{"aws:SourceArn":{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","Arn"]}},"StringEquals":{"aws:SourceAccount":"423277768248"}},"Effect":"Allow","Principal":{"Service":"logging.s3.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","Arn"]},"/access-logs/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"WeatherAlertDistributionDBFA7249"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"WeatherAlertOAC":{"id":"WeatherAlertOAC","path":"WeatherAlertWebHostingStack/WeatherAlertOAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertOAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"description":"OAC for Weather Alert Web UI S3 bucket","name":"WeatherAlertOAC","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"WeatherAlertDistribution":{"id":"WeatherAlertDistribution","path":"WeatherAlertWebHostingStack/WeatherAlertDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.223.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"WeatherAlertWebHostingStack/WeatherAlertDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"WeatherAlertWebHostingStack/WeatherAlertDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WeatherAlertWebBucketD9CCCAAD","RegionalDomainName"]},"id":"WeatherAlertWebHostingStackWeatherAlertDistributionOrigin1FC1EB435","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["WeatherAlertOAC35703809","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"WeatherAlertWebHostingStackWeatherAlertDistributionOrigin1FC1EB435","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"comment":"Weather Alert System Web UI","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":300,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"WebsiteURL":{"id":"WebsiteURL","path":"WeatherAlertWebHostingStack/WebsiteURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolId":{"id":"UserPoolId","path":"WeatherAlertWebHostingStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"WeatherAlertWebHostingStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"IdentityPoolId":{"id":"IdentityPoolId","path":"WeatherAlertWebHostingStack/IdentityPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ApiEndpoint":{"id":"ApiEndpoint","path":"WeatherAlertWebHostingStack/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Region":{"id":"Region","path":"WeatherAlertWebHostingStack/Region","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WeatherAlertWebHostingStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WeatherAlertWebHostingStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WeatherAlertWebHostingStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WeatherAlertWebHostingStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"WeatherAlertMonitoringStack":{"id":"WeatherAlertMonitoringStack","path":"WeatherAlertMonitoringStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"WeatherAlertAlarmTopic":{"id":"WeatherAlertAlarmTopic","path":"WeatherAlertMonitoringStack/WeatherAlertAlarmTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherAlertAlarmTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Weather Alert System Alarms","topicName":"WeatherAlert-SystemAlarms"}}},"Policy":{"id":"Policy","path":"WeatherAlertMonitoringStack/WeatherAlertAlarmTopic/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.TopicPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherAlertAlarmTopic/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopicPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::TopicPolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":"*","Resource":{"Ref":"WeatherAlertAlarmTopic8E538C21"},"Sid":"AllowPublishThroughSSLOnly"},{"Action":"sns:Publish","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Ref":"WeatherAlertAlarmTopic8E538C21"},"Sid":"AllowPublishThroughSSLOnly"}],"Version":"2012-10-17"},"topics":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}]}}}}}}},"WeatherAlertDashboard":{"id":"WeatherAlertDashboard","path":"WeatherAlertMonitoringStack/WeatherAlertDashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherAlertDashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"widgets\":[{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RecipientsToLocations - Invocations & Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"RecipientsToLocations - Duration\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"WeatherFetch - Invocations & Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"WeatherFetch - Duration\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"MessageGenerator - Invocations & Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"MessageGenerator - Duration\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SendSMS - Invocations & Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefSendAdviceSMSFn1E4B7F74D99686BA"},"\",{\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefSendAdviceSMSFn1E4B7F74D99686BA"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SendSMS - Duration\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefSendAdviceSMSFn1E4B7F74D99686BA"},"\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"LocationFetch Queue - Messages\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619QueueName00B3E0EE"},"\",{\"stat\":\"Maximum\"}],[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619QueueName00B3E0EE"},"\",{\"stat\":\"Sum\"}],[\"AWS/SQS\",\"NumberOfMessagesReceived\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619QueueName00B3E0EE"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"WeatherResult Queue - Messages\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEQueueName21D206D0"},"\",{\"stat\":\"Maximum\"}],[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEQueueName21D206D0"},"\",{\"stat\":\"Sum\"}],[\"AWS/SQS\",\"NumberOfMessagesReceived\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEQueueName21D206D0"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Notify Queue - Messages\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758QueueName41D06F23"},"\",{\"stat\":\"Maximum\"}],[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758QueueName41D06F23"},"\",{\"stat\":\"Sum\"}],[\"AWS/SQS\",\"NumberOfMessagesReceived\",\"QueueName\",\"",{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758QueueName41D06F23"},"\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"End-to-End Flow\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"},"\",{\"label\":\"1. Recipients Scanned\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"},"\",{\"label\":\"2. Weather Fetched\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"},"\",{\"label\":\"3. Messages Generated\",\"stat\":\"Sum\"}]],\"yAxis\":{}}}]}"]]},"dashboardName":"WeatherAlert-System-Dashboard"}}}}},"RecipientsToLocationsErrorAlarm":{"id":"RecipientsToLocationsErrorAlarm","path":"WeatherAlertMonitoringStack/RecipientsToLocationsErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/RecipientsToLocationsErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-RecipientsToLocations-Errors","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"RecipientsToLocationsDurationAlarm":{"id":"RecipientsToLocationsDurationAlarm","path":"WeatherAlertMonitoringStack/RecipientsToLocationsDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/RecipientsToLocationsDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-RecipientsToLocations-SlowExecution","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefRecipientsToLocationsFn3C2C04256AF80DD8"}}],"evaluationPeriods":2,"metricName":"Duration","namespace":"AWS/Lambda","period":300,"statistic":"Average","threshold":60000,"treatMissingData":"notBreaching"}}}}},"WeatherFetchErrorAlarm":{"id":"WeatherFetchErrorAlarm","path":"WeatherAlertMonitoringStack/WeatherFetchErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherFetchErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-WeatherFetch-Errors","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"WeatherFetchDurationAlarm":{"id":"WeatherFetchDurationAlarm","path":"WeatherAlertMonitoringStack/WeatherFetchDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherFetchDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-WeatherFetch-SlowExecution","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefWeatherFetchFnAA97F15F1DA3CD93"}}],"evaluationPeriods":2,"metricName":"Duration","namespace":"AWS/Lambda","period":300,"statistic":"Average","threshold":60000,"treatMissingData":"notBreaching"}}}}},"MessageGeneratorErrorAlarm":{"id":"MessageGeneratorErrorAlarm","path":"WeatherAlertMonitoringStack/MessageGeneratorErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/MessageGeneratorErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-MessageGenerator-Errors","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"MessageGeneratorDurationAlarm":{"id":"MessageGeneratorDurationAlarm","path":"WeatherAlertMonitoringStack/MessageGeneratorDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/MessageGeneratorDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-MessageGenerator-SlowExecution","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefMessageGeneratorFn38C9DEB2DA8EDFEC"}}],"evaluationPeriods":2,"metricName":"Duration","namespace":"AWS/Lambda","period":300,"statistic":"Average","threshold":60000,"treatMissingData":"notBreaching"}}}}},"SendSMSErrorAlarm":{"id":"SendSMSErrorAlarm","path":"WeatherAlertMonitoringStack/SendSMSErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/SendSMSErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-SendSMS-Errors","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefSendAdviceSMSFn1E4B7F74D99686BA"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"SendSMSDurationAlarm":{"id":"SendSMSDurationAlarm","path":"WeatherAlertMonitoringStack/SendSMSDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/SendSMSDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-SendSMS-SlowExecution","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"FunctionName","value":{"Fn::ImportValue":"WeatherAlertComputeStack:ExportsOutputRefSendAdviceSMSFn1E4B7F74D99686BA"}}],"evaluationPeriods":2,"metricName":"Duration","namespace":"AWS/Lambda","period":300,"statistic":"Average","threshold":60000,"treatMissingData":"notBreaching"}}}}},"LocationFetchQueueBacklogAlarm":{"id":"LocationFetchQueueBacklogAlarm","path":"WeatherAlertMonitoringStack/LocationFetchQueueBacklogAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/LocationFetchQueueBacklogAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-LocationFetch-QueueBacklog","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"QueueName","value":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttLocationFetchQueue91236619QueueName00B3E0EE"}}],"evaluationPeriods":2,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1000,"treatMissingData":"notBreaching"}}}}},"WeatherResultQueueBacklogAlarm":{"id":"WeatherResultQueueBacklogAlarm","path":"WeatherAlertMonitoringStack/WeatherResultQueueBacklogAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/WeatherResultQueueBacklogAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-WeatherResult-QueueBacklog","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"QueueName","value":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttWeatherResultQueueE0248ACEQueueName21D206D0"}}],"evaluationPeriods":2,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1000,"treatMissingData":"notBreaching"}}}}},"NotifyQueueBacklogAlarm":{"id":"NotifyQueueBacklogAlarm","path":"WeatherAlertMonitoringStack/NotifyQueueBacklogAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"WeatherAlertMonitoringStack/NotifyQueueBacklogAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"WeatherAlertAlarmTopic8E538C21"}],"alarmName":"WeatherAlert-Notify-QueueBacklog","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"QueueName","value":{"Fn::ImportValue":"WeatherAlertDataStack:ExportsOutputFnGetAttNotifyQueueB34E1758QueueName41D06F23"}}],"evaluationPeriods":2,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","period":300,"statistic":"Average","threshold":1000,"treatMissingData":"notBreaching"}}}}},"DashboardUrl":{"id":"DashboardUrl","path":"WeatherAlertMonitoringStack/DashboardUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AlarmTopicArn":{"id":"AlarmTopicArn","path":"WeatherAlertMonitoringStack/AlarmTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"WeatherAlertMonitoringStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"WeatherAlertMonitoringStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"WeatherAlertMonitoringStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"WeatherAlertMonitoringStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}