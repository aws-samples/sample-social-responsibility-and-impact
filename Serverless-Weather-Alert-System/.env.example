# Serverless Weather Alert System - Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# AWS Configuration
# ============================================================================
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012

# ============================================================================
# Use Case Configuration
# ============================================================================
# Choose your use case: maternal-health, agriculture, construction, public-safety
USE_CASE_NAME=maternal-health

# Recipient field configuration
RECIPIENT_TYPE_FIELD=pregnancy_status
RECIPIENT_CONTEXT_FIELDS=pregnancy_week,medical_conditions,delivery_date

# ============================================================================
# Weather Configuration
# ============================================================================
# Weather provider (tomorrow_io, openweather, etc.)
WEATHER_PROVIDER=tomorrow_io

# Weather threshold configuration
WEATHER_THRESHOLD_FIELD=temperature
THRESHOLD_VALUE=32
THRESHOLD_OPERATOR=gte  # gte (>=), lte (<=), eq (==)

# Tomorrow.io API Configuration
TOMORROW_IO_API_KEY=your_api_key_here
# Get free key at: https://www.tomorrow.io/weather-api/

# ============================================================================
# Amazon Bedrock Configuration
# ============================================================================
# Bedrock Knowledge Base ID (create via AWS Console)
BEDROCK_KNOWLEDGE_BASE_ID=your_kb_id_here

# Bedrock Model ID
BEDROCK_MODEL_ID=anthropic.claude-3-sonnet-20240229-v1:0

# System prompt for AI advice generation
BEDROCK_SYSTEM_PROMPT="You are a maternal health advisor providing supportive, actionable health advice to pregnant and postpartum mothers based on weather forecasts."

# Context field for personalization
BEDROCK_CONTEXT_FIELD=pregnancy_week

# Keywords for Knowledge Base search
USE_CASE_KEYWORDS="maternal health Kenya weather advice"

# ============================================================================
# Lambda Configuration
# ============================================================================
# Concurrency limits (respect API quotas)
WEATHER_FETCH_CONCURRENCY=1
MESSAGE_GENERATOR_CONCURRENCY=2

# Rate limiting
API_CALL_SLEEP_SECONDS=0.5

# Demo mode (processes all weather conditions, not just threshold exceedances)
DEMO_MODE=false

# ============================================================================
# DynamoDB Configuration
# ============================================================================
RECIPIENTS_TABLE_NAME=RecipientsTable
BILLING_MODE=PAY_PER_REQUEST  # or PROVISIONED

# ============================================================================
# SQS Configuration
# ============================================================================
LOCATION_FETCH_QUEUE_NAME=LocationFetchQueue
WEATHER_RESULT_QUEUE_NAME=WeatherResultQueue
NOTIFY_QUEUE_NAME=NotifyQueue

# Message retention (seconds)
MESSAGE_RETENTION_PERIOD=345600  # 4 days

# Visibility timeout (seconds)
VISIBILITY_TIMEOUT=300  # 5 minutes

# ============================================================================
# EventBridge Configuration
# ============================================================================
# Schedule expression (cron or rate)
SCHEDULE_EXPRESSION=cron(0 6 * * ? *)  # Daily at 6 AM UTC
# Alternative: rate(6 hours)

# ============================================================================
# Web UI Configuration (React)
# ============================================================================
# Application branding
REACT_APP_TITLE="Weather Alert Dashboard"
REACT_APP_SUBTITLE="Personalized weather alerts powered by AI"

# Terminology customization
REACT_APP_RECIPIENT_LABEL="Recipients"
REACT_APP_RECIPIENT_LABEL_SINGULAR="Recipient"
REACT_APP_LOCATION_LABEL="Location"
REACT_APP_LOCATION_LABEL_PLURAL="Locations"
REACT_APP_MESSAGE_LABEL="Personalized Message"
REACT_APP_ADVICE_LABEL="Weather Advisory"
REACT_APP_TEMPERATURE_LABEL="Max Temperature"
REACT_APP_DATE_LABEL="Alert Date"
REACT_APP_MAP_TITLE="Alert Locations"

# API Configuration
REACT_APP_API_ENDPOINT=https://your-api-gateway-url.execute-api.us-east-1.amazonaws.com/prod

# Cognito Configuration
REACT_APP_USER_POOL_ID=us-east-1_XXXXXXXXX
REACT_APP_USER_POOL_CLIENT_ID=your_client_id_here
REACT_APP_IDENTITY_POOL_ID=us-east-1:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# CloudFront Distribution
REACT_APP_CLOUDFRONT_URL=https://your-distribution.cloudfront.net

# ============================================================================
# Monitoring Configuration
# ============================================================================
# CloudWatch alarm email
ALARM_EMAIL=alerts@example.com

# SNS Topic for alarms
ALARM_SNS_TOPIC_ARN=arn:aws:sns:us-east-1:123456789012:weather-alerts-alarms

# ============================================================================
# SMS Configuration (Optional)
# ============================================================================
# Enable SMS notifications
ENABLE_SMS=false

# Africa's Talking Configuration (if using)
AT_USERNAME=your_username
AT_API_KEY=your_api_key

# ============================================================================
# Data Loading Configuration
# ============================================================================
# S3 bucket for data files
DATA_BUCKET_NAME=your-data-bucket

# Data file path
DATA_FILE_KEY=maternal-profiles.xlsx

# Batch size for DynamoDB writes
BATCH_SIZE=25

# Resume capability
ENABLE_RESUME=true
CHECKPOINT_FILE=.checkpoint

# ============================================================================
# Security Configuration
# ============================================================================
# Secrets Manager secret names
WEATHER_API_SECRET_NAME=weather-alert-system/api-key
SMS_API_SECRET_NAME=weather-alert-system/sms-api-key

# Encryption
ENABLE_ENCRYPTION=true
KMS_KEY_ID=alias/aws/dynamodb

# ============================================================================
# Development/Testing Configuration
# ============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Enable X-Ray tracing
ENABLE_XRAY=true

# Enable detailed CloudWatch metrics
ENABLE_DETAILED_METRICS=true

# ============================================================================
# Use Case Presets
# ============================================================================

# Maternal Health Preset
# USE_CASE_NAME=maternal-health
# RECIPIENT_TYPE_FIELD=pregnancy_status
# WEATHER_THRESHOLD_FIELD=temperature
# THRESHOLD_VALUE=32
# BEDROCK_SYSTEM_PROMPT="You are a maternal health advisor..."
# REACT_APP_TITLE="Maternal Health Weather Alerts"
# REACT_APP_RECIPIENT_LABEL="Mothers"
# REACT_APP_LOCATION_LABEL="Health Facility"

# Agriculture Preset
# USE_CASE_NAME=agriculture
# RECIPIENT_TYPE_FIELD=crop_type
# WEATHER_THRESHOLD_FIELD=temperature
# THRESHOLD_VALUE=0
# THRESHOLD_OPERATOR=lte
# BEDROCK_SYSTEM_PROMPT="You are an agricultural advisor..."
# REACT_APP_TITLE="Farm Weather Alerts"
# REACT_APP_RECIPIENT_LABEL="Farmers"
# REACT_APP_LOCATION_LABEL="Farm"

# Construction Preset
# USE_CASE_NAME=construction
# RECIPIENT_TYPE_FIELD=project_type
# WEATHER_THRESHOLD_FIELD=wind_speed
# THRESHOLD_VALUE=40
# BEDROCK_SYSTEM_PROMPT="You are a construction safety advisor..."
# REACT_APP_TITLE="Construction Site Weather Alerts"
# REACT_APP_RECIPIENT_LABEL="Site Managers"
# REACT_APP_LOCATION_LABEL="Construction Site"

# Public Safety Preset
# USE_CASE_NAME=public-safety
# RECIPIENT_TYPE_FIELD=housing_type
# WEATHER_THRESHOLD_FIELD=rainfall
# THRESHOLD_VALUE=100
# BEDROCK_SYSTEM_PROMPT="You are a public safety emergency advisor..."
# REACT_APP_TITLE="Public Weather Alerts"
# REACT_APP_RECIPIENT_LABEL="Citizens"
# REACT_APP_LOCATION_LABEL="Area"
